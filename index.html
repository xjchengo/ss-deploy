<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>灵雀云Shadowsocks部署工具</title>

    <!-- Bootstrap -->
    <link href="./bootstrap-3.3.5/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <h1>一键部署 Shadowsocks 到灵雀云上</h1>
      <div class="col-md-9">
        <form class="form-horizontal">
          <div class="form-group">
            <label for="selectAuthType" class="col-sm-4 control-label">账号鉴权方式</label>
            <div class="col-sm-8">
              <select class="form-control" id="selectAuthType" name="auth_type">
                <option id="authTypeToken" value="token" selected>Token</option>
                <option id="authTypePassword" value="password">账号密码</option>
              </select>
            </div>
          </div>
          <div class="form-group auth-type-token">
            <label for="inputToken" class="col-sm-4 control-label">Token</label>
            <div class="col-sm-8">
              <input type="text" name="token" class="form-control" id="inputToken" placeholder="可以在用户设置中找到你的token">
            </div>
          </div>
          <div class="form-group auth-type-password hide">
            <label for="inputUsername" class="col-sm-4 control-label">用户名</label>
            <div class="col-sm-8">
              <input type="text" name="username" class="form-control" id="inputUsername" placeholder="用户名">
            </div>
          </div>
          <div class="form-group auth-type-password hide">
            <label for="inputPassword" class="col-sm-4 control-label">密码</label>
            <div class="col-sm-8">
              <input type="password" name="password" class="form-control" id="inputPassword" placeholder="密码">
            </div>
          </div>
          <div class="form-group">
            <label for="inputSSPassword" class="col-sm-4 control-label">Shadowsocks 密码</label>
            <div class="col-sm-8">
              <input type="password" name="ss_password" class="form-control" id="inputSSPassword" placeholder="Shadowsocks 密码">
            </div>
          </div>
          <div class="form-group">
            <label for="inputTimeout" class="col-sm-4 control-label">Shadowsocks 服务器超时时间</label>
            <div class="col-sm-8">
              <input type="text" name="timeout" class="form-control" id="inputTimeout" placeholder="Shadowsocks Timeout" value="300">
            </div>
          </div>
          <div class="form-group">
            <label for="inputSSPassword" class="col-sm-4 control-label">Shadowsocks 加密方式</label>
            <div class="col-sm-8">
              <select class="form-control" id="selectAuthType" name="auth_type">
                <option selected>aes-256-cfb</option>
                <option>aes-128-cfb</option>
                <option>aes-192-cfb</option>
                <option>aes-256-ofb</option>
                <option>aes-128-ofb</option>
                <option>aes-192-ofb</option>
                <option>aes-128-ctr</option>
                <option>aes-192-ctr</option>
                <option>aes-256-ctr</option>
                <option>aes-128-cfb8</option>
                <option>aes-192-cfb8</option>
                <option>aes-256-cfb8</option>
                <option>aes-128-cfb1</option>
                <option>aes-192-cfb1</option>
                <option>aes-256-cfb1</option>
                <option>bf-cfb</option>
                <option>camellia-128-cfb</option>
                <option>camellia-192-cfb</option>
                <option>camellia-256-cfb</option>
                <option>cast5-cfb</option>
                <option>chacha20</option>
                <option>idea-cfb</option>
                <option>rc2-cfb</option>
                <option>rc4-md5</option>
                <option>salsa20</option>
                <option>seed-cfb</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="inputWorkers" class="col-sm-4 control-label">Shadowsocks Worker 数量</label>
            <div class="col-sm-8">
              <input type="text" name="workers" class="form-control" id="inputWorkers" placeholder="Shadowsocks Worker 数量" value="1">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-4 col-sm-8">
              <button type="submit" class="btn btn-default">部署</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="./bootstrap-3.3.5/dist/js/bootstrap.min.js"></script>
    <script src="./jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="./jquery-validation/dist/localization/messages_zh.min.js"></script>
    <script src="./jquery-blockui/jquery.blockUI.js"></script>
    <script type="text/javascript">
    $('#selectAuthType').change(function() {
      var authType = $(this).val();
      if (authType == 'token') {
        $('.auth-type-password').addClass('hide');
        $('.auth-type-token').removeClass('hide');
      } else {
        $('.auth-type-token').addClass('hide');
        $('.auth-type-password').removeClass('hide');
      }
    });
    $("form").validate({
      rules: {
        auth_type: {
          required: true
        },
        token: {
          required: '#authTypeToken:selected'
        },
        username: {
          required: '#authTypePassword:selected'
        },
        password: {
          required: '#authTypePassword:selected'
        },
        ss_password: {
          required: true
        },
        timeout: {
          required: true,
          number: true
        },
        method: {
          required: true
        },
        workers: {
          required: true,
          number: true
        }
      },
      submitHandler: function(form) {
        $.blockUI({
          message: '<h1>Shadowsocks 服务部署中<img src="./jquery-blockui/ajax-loader.gif"></h1>'
        });
      }
    });
    </script>
  </body>
</html>